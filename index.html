<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>UK Government Services Graph</title>
  <style>
    *{box-sizing:border-box;margin:0;padding:0}
    :root{--bg:#0f1117;--surface:#161b22;--border:#21262d;--text:#c9d1d9;--muted:#8b949e;--accent:#58a6ff}
    body{background:var(--bg);color:var(--text);font-family:'Menlo','Monaco','Courier New',monospace;display:flex;height:100vh;overflow:hidden}

    /* ── Sidebar ─────────────────────────────────────────────────── */
    #sidebar{width:264px;min-width:264px;background:var(--surface);border-right:1px solid var(--border);overflow-y:auto;display:flex;flex-direction:column}
    .sb-head{padding:12px 14px 10px;border-bottom:1px solid var(--border)}
    .sb-head h1{font-size:.85rem;color:var(--accent);margin-bottom:3px}
    .sb-head p{font-size:.7rem;color:var(--muted);line-height:1.5;margin-top:4px}
    .sb-head a{color:var(--accent);text-decoration:none}
    .sb-head a:hover{text-decoration:underline}
    .sb-sec{padding:10px 14px;border-bottom:1px solid var(--border)}
    .sb-title{font-size:.68rem;color:var(--muted);text-transform:uppercase;letter-spacing:.08em;margin-bottom:7px}
    #search{width:100%;background:var(--bg);border:1px solid var(--border);color:var(--text);font-family:inherit;font-size:.78rem;padding:5px 8px;border-radius:4px;outline:none}
    #search:focus{border-color:var(--accent)}
    #search::placeholder{color:var(--muted)}

    .ev-btn{display:flex;align-items:flex-start;gap:7px;width:100%;background:none;border:1px solid transparent;border-radius:4px;color:var(--text);font-family:inherit;font-size:.75rem;padding:4px 6px;cursor:pointer;text-align:left;line-height:1.3;margin-bottom:2px}
    .ev-btn:hover{background:var(--bg);border-color:var(--border)}
    .ev-btn.active{background:#1a3050;border-color:var(--accent)}
    .ev-icon{font-size:.9rem;min-width:16px;padding-top:1px}
    .ev-name{font-weight:bold;font-size:.74rem}
    .ev-desc{color:var(--muted);font-size:.68rem;margin-top:1px}

    .dept-row{display:flex;align-items:center;gap:7px;padding:3px 6px;border-radius:4px;cursor:pointer;border:1px solid transparent;margin-bottom:2px;font-size:.76rem}
    .dept-row:hover{background:var(--bg);border-color:var(--border)}
    .dept-row.active{background:var(--bg);border-color:var(--border)}
    .dept-dot{width:10px;height:10px;border-radius:50%;flex-shrink:0}
    .dept-count{color:var(--muted);font-size:.68rem;margin-left:auto}

    .tog{display:flex;align-items:center;gap:7px;margin-bottom:6px;font-size:.78rem;cursor:pointer}
    .tog input{cursor:pointer;accent-color:var(--accent)}
    .req-lbl{color:#60a5fa}
    .enb-lbl{color:#6b7280}

    .lay-btn{padding:4px 10px;font-size:.76rem;font-family:inherit;background:var(--bg);border:1px solid var(--border);color:var(--text);border-radius:4px;cursor:pointer;margin-right:4px;margin-bottom:4px}
    .lay-btn:hover{border-color:var(--accent);color:var(--accent)}
    .lay-btn.active{border-color:var(--accent);color:var(--accent);background:#1a3050}

    .reset-btn{width:100%;padding:6px;font-size:.78rem;font-family:inherit;background:var(--bg);border:1px solid var(--border);color:var(--muted);border-radius:4px;cursor:pointer}
    .reset-btn:hover{border-color:#ef4444;color:#ef4444}

    /* ── Graph canvas ─────────────────────────────────────────────── */
    #graph-area{flex:1;position:relative;overflow:hidden}
    #cy{width:100%;height:100%;background:var(--bg)}

    #match-info{position:absolute;top:10px;left:10px;background:var(--surface);border:1px solid var(--border);border-radius:5px;padding:4px 10px;font-size:.72rem;color:var(--muted);pointer-events:none;display:none}
    #match-info.vis{display:block}

    /* ── Detail panel ─────────────────────────────────────────────── */
    #detail{position:absolute;right:0;top:0;bottom:0;width:320px;background:var(--surface);border-left:1px solid var(--border);overflow-y:auto;padding:16px;transform:translateX(100%);transition:transform .2s ease}
    #detail.open{transform:translateX(0)}
    .det-close{float:right;background:none;border:none;color:var(--muted);font-size:1rem;cursor:pointer;padding:2px 5px}
    .det-close:hover{color:var(--text)}
    .det-name{font-size:.95rem;font-weight:bold;margin-bottom:8px;margin-right:24px;line-height:1.4}
    .bdg{display:inline-block;padding:2px 7px;border-radius:3px;font-size:.68rem;margin-right:4px;margin-bottom:5px}
    .bdg-dept{background:#1f3a5f;color:var(--accent)}
    .bdg-type{background:#1a3520;color:#22c55e}
    .bdg-dl{background:#4a1f1f;color:#ef4444}
    .bdg-pro{background:#3a2f12;color:#eab308}
    .bdg-gat{background:#2a2040;color:#a855f7}
    .bdg-uni{background:#1a3520;color:#22c55e}
    .bdg-mns{background:#4a1f1f;color:#ef4444}
    .det-desc{font-size:.78rem;color:var(--text);line-height:1.6;margin:10px 0;border-left:2px solid var(--border);padding-left:8px}
    .det-elig{font-size:.73rem;color:var(--muted);line-height:1.5;margin:8px 0;font-style:italic}
    .det-stitle{font-size:.68rem;color:var(--muted);text-transform:uppercase;letter-spacing:.06em;margin:12px 0 4px}
    .det-list{list-style:none}
    .det-list li{font-size:.73rem;color:var(--text);padding:3px 0;border-bottom:1px solid var(--border)}
    .det-list li:last-child{border-bottom:none}
    .det-nid{color:var(--muted);font-size:.63rem}
    .det-link{display:block;color:var(--accent);font-size:.72rem;text-decoration:none;margin-top:10px;word-break:break-all}
    .det-link:hover{text-decoration:underline}
    .det-id{font-size:.63rem;color:var(--muted);margin-top:6px}
    .stats-line{font-size:.7rem;color:var(--muted);line-height:1.9}
    .stats-line span{color:var(--text)}
  </style>
</head>
<body>
  <div id="sidebar">
    <div class="sb-head">
      <h1>UK Services Graph</h1>
      <p>A proof-of-concept service graph for UK government life events. Click a life event to trace its journey. Click any node for details.</p>
    </div>
    <div class="sb-sec">
      <div class="sb-title">Search</div>
      <input id="search" type="text" placeholder="Filter services…" autocomplete="off">
    </div>
    <div class="sb-sec">
      <div class="sb-title">Life Events &mdash; click to trace journey</div>
      <div id="ev-list"></div>
    </div>
    <div class="sb-sec">
      <div class="sb-title">Departments</div>
      <div id="dept-list"></div>
    </div>
    <div class="sb-sec">
      <div class="sb-title">Edge Types</div>
      <label class="tog"><input type="checkbox" id="tog-req" checked><span class="req-lbl">&#8212; REQUIRES</span> <span style="font-size:.65rem;color:var(--muted)">(strict order)</span></label>
      <label class="tog"><input type="checkbox" id="tog-enb" checked><span class="enb-lbl">&#8943; ENABLES</span> <span style="font-size:.65rem;color:var(--muted)">(unlocks)</span></label>
    </div>
    <div class="sb-sec">
      <div class="sb-title">Layout</div>
      <button class="lay-btn active" data-layout="cose">Force</button>
      <button class="lay-btn" data-layout="dagre">Hierarchy</button>
      <button class="lay-btn" data-layout="breadthfirst">BFS</button>
    </div>
    <div class="sb-sec">
      <button class="reset-btn" id="reset-btn">Reset All</button>
    </div>
    <div class="sb-sec" style="flex:1;border-bottom:none">
      <div class="stats-line">
        <div><span>96</span> services</div>
        <div><span>78</span> relationships</div>
        <div><span>13</span> life events</div>
      </div>
    </div>
  </div>

  <div id="graph-area">
    <div id="match-info"></div>
    <div id="cy"></div>
    <div id="detail">
      <button class="det-close" id="det-close">&#x2715;</button>
      <div id="det-body"></div>
    </div>
  </div>

  <script src="https://unpkg.com/cytoscape@3.30.2/dist/cytoscape.min.js"></script>
  <script src="https://unpkg.com/dagre@0.8.5/dist/dagre.min.js"></script>
  <script src="https://unpkg.com/cytoscape-dagre@2.5.0/cytoscape-dagre.js"></script>
  <script>
    var DEPT_COLORS = {
      gro:'#4f86c6', hmrc:'#22c55e', dwp:'#a855f7', dvla:'#ef4444',
      hmcts:'#f97316', opg:'#06b6d4', nhs:'#ec4899', ho:'#94a3b8',
      ch:'#eab308', la:'#84cc16', lr:'#64748b', other:'#9ca3af'
    };

    var NODES_DATA   = [{"data":{"id":"gro-register-birth","label":"Register the birth","fullName":"Register the birth","dept":"GRO","deptKey":"gro","serviceType":"registration","deadline":"42 days","desc":"Register at local register office. Gateway to Child Benefit, free childcare and parental leave top-ups.","govuk_url":"https://www.gov.uk/register-birth","proactive":true,"gated":false,"universal":true,"means_tested":false,"eligibilitySummary":"Required for every birth in England and Wales. Must be done by a parent or other qualified informant within 42 days."}},{"data":{"id":"gro-register-death","label":"Register the death","fullName":"Register the death","dept":"GRO","deptKey":"gro","serviceType":"registration","deadline":"5 days","desc":"Register at local register office. Required before probate, Tell Us Once and bereavement payments.","govuk_url":"https://www.gov.uk/register-a-death","proactive":true,"gated":false,"universal":true,"means_tested":false,"eligibilitySummary":"Required for every death in England and Wales. Must be done by a qualified informant (relative, person present at death, etc.) within 5 days."}},{"data":{"id":"gro-death-certificate","label":"Obtain death certifi…","fullName":"Obtain death certificates","dept":"GRO","deptKey":"gro","serviceType":"document","deadline":null,"desc":"Order multiple certified copies — banks, insurers and probate all require originals.","govuk_url":"https://www.gov.uk/order-copy-birth-death-marriage-certificate","proactive":true,"gated":true,"universal":true,"means_tested":false,"eligibilitySummary":"Anyone can order certified copies of a registered death. Death must have been registered first. Banks, probate and insurers all need originals."}},{"data":{"id":"gro-give-notice","label":"Give notice of marri…","fullName":"Give notice of marriage","dept":"GRO","deptKey":"gro","serviceType":"obligation","deadline":"28 days before","desc":"At local register office. Legally required at least 28 days before ceremony.","govuk_url":"https://www.gov.uk/marriages-civil-partnerships/giving-notice","proactive":true,"gated":false,"universal":false,"means_tested":false,"eligibilitySummary":"Both parties to a marriage or civil partnership must give notice at their local register office at least 28 days before the ceremony. Legally required."}},{"data":{"id":"gro-marriage-cert","label":"Marriage / CP certif…","fullName":"Marriage / CP certificate","dept":"GRO","deptKey":"gro","serviceType":"document","deadline":null,"desc":"Gateway document for name changes, Marriage Allowance and benefit updates.","govuk_url":"https://www.gov.uk/order-copy-birth-death-marriage-certificate","proactive":true,"gated":true,"universal":true,"means_tested":false,"eligibilitySummary":"Issued after a marriage or civil partnership ceremony. Acts as the gateway document for name changes, Marriage Allowance, and updating government records."}},{"data":{"id":"hmrc-child-benefit","label":"Child Benefit","fullName":"Child Benefit","dept":"HMRC","deptKey":"hmrc","serviceType":"benefit","deadline":null,"desc":"Backdatable 3 months. High Income Charge applies if either parent earns over £60k.","govuk_url":"https://www.gov.uk/child-benefit","proactive":true,"gated":false,"universal":true,"means_tested":false,"eligibilitySummary":"Available to anyone responsible for a child under 16 (or under 20 in qualifying education). Backdatable 3 months. High Income Child Benefit Charge applies if either parent earns over £60k."}},{"data":{"id":"hmrc-smp","label":"Statutory Maternity …","fullName":"Statutory Maternity Pay","dept":"HMRC","deptKey":"hmrc","serviceType":"entitlement","deadline":null,"desc":"Via employer if 26+ weeks employed and earning above lower earnings limit.","govuk_url":"https://www.gov.uk/maternity-pay-leave/pay","proactive":true,"gated":false,"universal":false,"means_tested":false,"eligibilitySummary":"Paid by employer for up to 39 weeks. Requires 26 weeks of continuous employment with the same employer by the 15th week before the due date."}},{"data":{"id":"hmrc-spp","label":"Statutory Paternity …","fullName":"Statutory Paternity Pay","dept":"HMRC","deptKey":"hmrc","serviceType":"entitlement","deadline":"8 weeks","desc":"2 weeks at statutory rate. Must be arranged before baby is 8 weeks old.","govuk_url":"https://www.gov.uk/paternity-pay-leave","proactive":true,"gated":false,"universal":false,"means_tested":false,"eligibilitySummary":"1 or 2 weeks of paternity leave and pay. Must be the baby's father, partner of the mother, or the adopter's partner. Requires 26 weeks of continuous employment."}},{"data":{"id":"hmrc-spl","label":"Shared Parental Leav…","fullName":"Shared Parental Leave & Pay","dept":"HMRC","deptKey":"hmrc","serviceType":"entitlement","deadline":null,"desc":"Split remaining leave/pay between parents. Complex eligibility — both employers involved.","govuk_url":"https://www.gov.uk/shared-parental-leave-and-pay","proactive":true,"gated":true,"universal":false,"means_tested":false,"eligibilitySummary":"Allows eligible parents to split up to 50 weeks of leave and 37 weeks of pay between them. Both parents must individually meet employment/earnings tests."}},{"data":{"id":"hmrc-free-childcare-15","label":"Free childcare — 15 …","fullName":"Free childcare — 15 hours","dept":"HMRC","deptKey":"hmrc","serviceType":"entitlement","deadline":null,"desc":"From 9 months old. Universal entitlement. Via Tax-Free Childcare account.","govuk_url":"https://www.gov.uk/help-paying-childcare/free-childcare-and-education-for-2-to-4-year-olds","proactive":true,"gated":false,"universal":true,"means_tested":false,"eligibilitySummary":"Universal 15 hours per week free childcare for children aged 9 months to 4 years. No income test. Apply via Childcare Choices / Tax-Free Childcare account."}},{"data":{"id":"hmrc-free-childcare-30","label":"Free childcare — 30 …","fullName":"Free childcare — 30 hours","dept":"HMRC","deptKey":"hmrc","serviceType":"entitlement","deadline":null,"desc":"3–4 year olds where both parents work minimum hours.","govuk_url":"https://www.gov.uk/help-paying-childcare/free-childcare-and-education-for-2-to-4-year-olds","proactive":true,"gated":true,"universal":false,"means_tested":false,"eligibilitySummary":"An additional 15 hours (total 30 hours/week) for 3–4 year olds where both parents (or single parent) are in work earning at least NMW for 16 hours/week and neither earns over £100,000."}},{"data":{"id":"hmrc-tax-free-childcare","label":"Tax-Free Childcare a…","fullName":"Tax-Free Childcare account","dept":"HMRC","deptKey":"hmrc","serviceType":"entitlement","deadline":null,"desc":"Government tops up by 25p per £1 saved (max £500/quarter). Cannot use alongside UC childcare element.","govuk_url":"https://www.gov.uk/tax-free-childcare","proactive":true,"gated":false,"universal":false,"means_tested":false,"eligibilitySummary":"For every £8 a parent pays into their account, the government adds £2 (up to £500 per child per quarter, or £1,000 if disabled). Must be in work and earning at least NMW for 16 hours."}},{"data":{"id":"hmrc-marriage-allowance","label":"Marriage Allowance","fullName":"Marriage Allowance","dept":"HMRC","deptKey":"hmrc","serviceType":"entitlement","deadline":null,"desc":"Transfer up to £1,260 of personal allowance if one partner earns below the threshold.","govuk_url":"https://www.gov.uk/marriage-allowance","proactive":true,"gated":true,"universal":false,"means_tested":false,"eligibilitySummary":"Transfer up to £1,260 of unused Personal Allowance to your spouse/civil partner, saving up to £252/year in tax. Backdatable up to 4 years."}},{"data":{"id":"hmrc-cancel-marriage-allowance","label":"Cancel Marriage Allo…","fullName":"Cancel Marriage Allowance","dept":"HMRC","deptKey":"hmrc","serviceType":"obligation","deadline":null,"desc":"Must be cancelled after divorce or separation. Done via Self Assessment or HMRC phone.","govuk_url":"https://www.gov.uk/marriage-allowance/if-your-circumstances-change","proactive":true,"gated":true,"universal":false,"means_tested":false,"eligibilitySummary":"If you were claiming Marriage Allowance and have now separated or divorced, it must be cancelled. Failure to cancel can result in an underpayment of tax."}},{"data":{"id":"hmrc-update-records","label":"Update HMRC records","fullName":"Update HMRC records","dept":"HMRC","deptKey":"hmrc","serviceType":"obligation","deadline":null,"desc":"Name, address and marital status. Affects tax code, benefits and correspondence.","govuk_url":"https://www.gov.uk/tell-hmrc-change-of-details","proactive":true,"gated":false,"universal":true,"means_tested":false,"eligibilitySummary":"Notify HMRC of any change to name, address or marital status. Affects tax code, correspondence and benefit entitlements. Required after moving, marriage, divorce or name change."}},{"data":{"id":"hmrc-sdlt","label":"Stamp Duty Land Tax …","fullName":"Stamp Duty Land Tax return","dept":"HMRC","deptKey":"hmrc","serviceType":"obligation","deadline":"14 days","desc":"File within 14 days of completion. Solicitor usually handles. Required even if no tax is due.","govuk_url":"https://www.gov.uk/stamp-duty-land-tax","proactive":true,"gated":true,"universal":true,"means_tested":false,"eligibilitySummary":"A return must be filed within 14 days of completing a property purchase in England or Northern Ireland. The solicitor usually handles this. Must be filed even if no tax is due."}},{"data":{"id":"hmrc-lisa","label":"Lifetime ISA withdra…","fullName":"Lifetime ISA withdrawal","dept":"HMRC","deptKey":"hmrc","serviceType":"entitlement","deadline":null,"desc":"Claim 25% government bonus. Conveyancer requests from ISA provider before completion.","govuk_url":"https://www.gov.uk/lifetime-isa","proactive":true,"gated":false,"universal":false,"means_tested":false,"eligibilitySummary":"First-time buyers can use their LISA savings (including the 25% government bonus) to purchase a property. Conveyancer requests the funds directly from the ISA provider before completion."}},{"data":{"id":"hmrc-iht400","label":"Inheritance Tax retu…","fullName":"Inheritance Tax return (IHT400)","dept":"HMRC","deptKey":"hmrc","serviceType":"obligation","deadline":"6 months","desc":"If estate exceeds £325k threshold. Tax must be paid before probate is granted.","govuk_url":"https://www.gov.uk/inheritance-tax","proactive":true,"gated":true,"universal":false,"means_tested":false,"eligibilitySummary":"Required if the estate's value exceeds the nil-rate band (£325,000, or up to £500,000 with the residence nil-rate band). Tax must be paid within 6 months of death — before probate is granted."}},{"data":{"id":"hmrc-p45","label":"Obtain P45 from empl…","fullName":"Obtain P45 from employer","dept":"HMRC","deptKey":"hmrc","serviceType":"document","deadline":null,"desc":"Employer must provide on last day. Required for new job or benefit claim.","govuk_url":"https://www.gov.uk/paye-forms-p45-p60-p11d/p45","proactive":true,"gated":false,"universal":true,"means_tested":false,"eligibilitySummary":"All employees are entitled to a P45 when leaving a job. The employer is legally required to issue it. Needed for a new employer, tax refund, or benefit claim."}},{"data":{"id":"hmrc-tax-refund","label":"Income tax refund (P…","fullName":"Income tax refund (P50)","dept":"HMRC","deptKey":"hmrc","serviceType":"entitlement","deadline":null,"desc":"If you have overpaid PAYE and are not returning to work in the same tax year.","govuk_url":"https://www.gov.uk/claim-tax-refund/you-get-a-pension","proactive":true,"gated":true,"universal":false,"means_tested":false,"eligibilitySummary":"Claim a refund if you have overpaid PAYE income tax during the year, typically after losing a job mid-year and not returning to work before April 5th."}},{"data":{"id":"hmrc-self-assessment","label":"Register for Self As…","fullName":"Register for Self Assessment","dept":"HMRC","deptKey":"hmrc","serviceType":"obligation","deadline":"5 Oct (yr 2)","desc":"Required for sole traders and company directors. Register by 5 October in second year of trading.","govuk_url":"https://www.gov.uk/register-for-self-assessment","proactive":true,"gated":false,"universal":false,"means_tested":false,"eligibilitySummary":"Required for the self-employed, company directors, landlords, and those with income not taxed at source. Register by 5 October in the second year of trading."}},{"data":{"id":"hmrc-corporation-tax","label":"Register for Corpora…","fullName":"Register for Corporation Tax","dept":"HMRC","deptKey":"hmrc","serviceType":"obligation","deadline":"3 months","desc":"Required within 3 months of starting to trade. Limited companies only.","govuk_url":"https://www.gov.uk/register-for-corporation-tax","proactive":true,"gated":true,"universal":false,"means_tested":false,"eligibilitySummary":"All limited companies must register for Corporation Tax within 3 months of starting to trade, even if making a loss. Applies to any company registered at Companies House."}},{"data":{"id":"hmrc-vat","label":"VAT registration","fullName":"VAT registration","dept":"HMRC","deptKey":"hmrc","serviceType":"obligation","deadline":null,"desc":"Mandatory if turnover exceeds £90k. Voluntary registration below threshold can be beneficial.","govuk_url":"https://www.gov.uk/vat-registration","proactive":true,"gated":false,"universal":false,"means_tested":false,"eligibilitySummary":"Mandatory once taxable turnover exceeds £90,000 in any rolling 12-month period. Voluntary registration below the threshold can allow VAT reclaim on purchases."}},{"data":{"id":"hmrc-paye","label":"Register as employer…","fullName":"Register as employer (PAYE)","dept":"HMRC","deptKey":"hmrc","serviceType":"obligation","deadline":"Before 1st payday","desc":"Required before first payday if employing anyone.","govuk_url":"https://www.gov.uk/register-employer","proactive":true,"gated":false,"universal":false,"means_tested":false,"eligibilitySummary":"Any business employing workers who earn above the Lower Earnings Limit or receive expenses/benefits must register as an employer with HMRC before the first payday."}},{"data":{"id":"hmrc-mtd","label":"Making Tax Digital e…","fullName":"Making Tax Digital enrolment","dept":"HMRC","deptKey":"hmrc","serviceType":"obligation","deadline":null,"desc":"Mandatory for VAT-registered businesses. Phased rollout for income tax from 2026.","govuk_url":"https://www.gov.uk/guidance/use-making-tax-digital-for-vat","proactive":true,"gated":true,"universal":false,"means_tested":false,"eligibilitySummary":"Mandatory for all VAT-registered businesses — must keep digital records and file VAT returns via MTD-compatible software. Income Tax MTD rolls out from April 2026 for self-employed/landlords with income over £50k."}},{"data":{"id":"hmrc-register-sole-trader","label":"Register as sole tra…","fullName":"Register as sole trader","dept":"HMRC","deptKey":"hmrc","serviceType":"registration","deadline":"5 Oct (yr 2)","desc":"Tell HMRC you are self-employed. Done via Self Assessment registration.","govuk_url":"https://www.gov.uk/set-up-sole-trader","proactive":true,"gated":false,"universal":false,"means_tested":false,"eligibilitySummary":"Anyone starting to work for themselves as a sole trader must register with HMRC. Done via the Self Assessment registration process. Deadline is 5 October in the second tax year of trading."}},{"data":{"id":"hmrc-carers-credit","label":"Carer's Credit","fullName":"Carer's Credit","dept":"HMRC","deptKey":"hmrc","serviceType":"entitlement","deadline":null,"desc":"National Insurance credits to protect State Pension while caring. For those not claiming Carer's Allowance.","govuk_url":"https://www.gov.uk/carers-credit","proactive":true,"gated":true,"universal":false,"means_tested":false,"eligibilitySummary":"Fills gaps in your NI record while you are caring (20+ hours/week) but not receiving Carer's Allowance. Protects your future State Pension entitlement."}},{"data":{"id":"hmrc-child-benefit-transfer","label":"Child Benefit transfer","fullName":"Child Benefit transfer","dept":"HMRC","deptKey":"hmrc","serviceType":"obligation","deadline":null,"desc":"Notify if child now lives with different parent after separation. Only one claimant permitted.","govuk_url":"https://www.gov.uk/child-benefit/change-of-circumstances","proactive":true,"gated":true,"universal":false,"means_tested":false,"eligibilitySummary":"After separation, only one parent can claim Child Benefit per child. If the child's living arrangements change, Child Benefit must be transferred to the main carer."}},{"data":{"id":"hmrc-ni-check","label":"Check & top up NI re…","fullName":"Check & top up NI record","dept":"HMRC","deptKey":"hmrc","serviceType":"entitlement","deadline":null,"desc":"Check for gaps before retiring. Voluntary contributions can fill missing years.","govuk_url":"https://www.gov.uk/check-national-insurance-record","proactive":true,"gated":false,"universal":true,"means_tested":false,"eligibilitySummary":"Anyone can check their NI record online for free via their Personal Tax Account. Gaps can be filled with voluntary Class 3 contributions. Critical to do before retirement."}},{"data":{"id":"hmrc-tax-on-pension","label":"Income tax on pension","fullName":"Income tax on pension","dept":"HMRC","deptKey":"hmrc","serviceType":"obligation","deadline":null,"desc":"State Pension is taxable income. PAYE applied to private/workplace pension automatically.","govuk_url":"https://www.gov.uk/tax-on-pension","proactive":true,"gated":true,"universal":false,"means_tested":false,"eligibilitySummary":"State Pension is taxable income, though paid without deduction. Private and workplace pensions are taxed via PAYE. Anyone whose total income exceeds the Personal Allowance (£12,570) will owe tax."}},{"data":{"id":"dwp-tell-us-once","label":"Tell Us Once","fullName":"Tell Us Once","dept":"DWP","deptKey":"dwp","serviceType":"registration","deadline":null,"desc":"Notifies HMRC, DVLA, DWP, passport office and local authority in one step after a death.","govuk_url":"https://www.gov.uk/after-a-death/organisations-you-need-to-contact-and-tell-us-once","proactive":true,"gated":true,"universal":true,"means_tested":false,"eligibilitySummary":"Available in most of England, Wales and Scotland after a death is registered. Notifies up to 23 government organisations in a single interaction. Saves significant time and effort."}},{"data":{"id":"dwp-bereavement-support","label":"Bereavement Support …","fullName":"Bereavement Support Payment","dept":"DWP","deptKey":"dwp","serviceType":"benefit","deadline":"21 months","desc":"If partner died, you are under State Pension age, and they had a NI record. Lump sum plus monthly payments.","govuk_url":"https://www.gov.uk/bereavement-support-payment","proactive":true,"gated":false,"universal":false,"means_tested":false,"eligibilitySummary":"A lump sum (up to £3,500) plus up to 18 monthly payments (up to £350/month) if your spouse or civil partner died and you are under State Pension age. Must claim within 3 months for full amount."}},{"data":{"id":"dwp-state-pension","label":"State Pension claim","fullName":"State Pension claim","dept":"DWP","deptKey":"dwp","serviceType":"entitlement","deadline":null,"desc":"Not automatic — must be actively claimed. Apply up to 4 months before State Pension age.","govuk_url":"https://www.gov.uk/new-state-pension/eligibility","proactive":true,"gated":true,"universal":false,"means_tested":false,"eligibilitySummary":"Not paid automatically — must be claimed. Apply up to 4 months before reaching State Pension age (currently 66). Full new State Pension (£221.20/week in 2024/25) requires 35 qualifying NI years."}},{"data":{"id":"dwp-pension-credit","label":"Pension Credit","fullName":"Pension Credit","dept":"DWP","deptKey":"dwp","serviceType":"benefit","deadline":null,"desc":"Tops up income to £218/week (single). Gateway benefit — unlocks Winter Fuel Payment and free TV Licence.","govuk_url":"https://www.gov.uk/pension-credit","proactive":true,"gated":true,"universal":false,"means_tested":true,"eligibilitySummary":"Tops up weekly income to at least £218.15 (single) or £332.95 (couple) in 2024/25. Gateway benefit — unlocks Winter Fuel Payment, free TV Licence (75+) and other entitlements. About 1 in 3 eligible pensioners don't claim."}},{"data":{"id":"dwp-winter-fuel","label":"Winter Fuel Payment","fullName":"Winter Fuel Payment","dept":"DWP","deptKey":"dwp","serviceType":"entitlement","deadline":null,"desc":"Now only if you receive Pension Credit or another qualifying benefit (changed 2024).","govuk_url":"https://www.gov.uk/winter-fuel-payment","proactive":true,"gated":true,"universal":false,"means_tested":false,"eligibilitySummary":"Annual payment of £200–£300 to help with heating costs. From winter 2024/25, only available to those receiving Pension Credit or another means-tested qualifying benefit. No longer automatic for all over-State-Pension-age."}},{"data":{"id":"dwp-attendance-allowance","label":"Attendance Allowance","fullName":"Attendance Allowance","dept":"DWP","deptKey":"dwp","serviceType":"benefit","deadline":null,"desc":"For over-65s with care needs. Not means-tested. Two rates depending on day/night needs.","govuk_url":"https://www.gov.uk/attendance-allowance","proactive":true,"gated":false,"universal":false,"means_tested":false,"eligibilitySummary":"For people who have reached State Pension age and need help with personal care due to a physical or mental condition. Not means-tested. Two rates: lower (day or night care) and higher (day and night care)."}},{"data":{"id":"dwp-pip","label":"Personal Independenc…","fullName":"Personal Independence Payment (PIP)","dept":"DWP","deptKey":"dwp","serviceType":"benefit","deadline":null,"desc":"For under-65s with disability. Not means-tested. Daily living and/or mobility components.","govuk_url":"https://www.gov.uk/pip","proactive":true,"gated":false,"universal":false,"means_tested":false,"eligibilitySummary":"For people aged 16 to 64 with a long-term health condition or disability. Not means-tested. Has daily living and mobility components, each at standard or enhanced rate. Opens access to many other benefits."}},{"data":{"id":"dwp-universal-credit","label":"Universal Credit","fullName":"Universal Credit","dept":"DWP","deptKey":"dwp","serviceType":"benefit","deadline":null,"desc":"Main out-of-work or low-income benefit. Report change of circumstances within 1 month.","govuk_url":"https://www.gov.uk/universal-credit","proactive":true,"gated":false,"universal":false,"means_tested":true,"eligibilitySummary":"The main means-tested benefit for those out of work or on a low income. Replaced 6 legacy benefits. Includes a standard allowance plus elements for children, housing, disability, and caring."}},{"data":{"id":"dwp-new-style-jsa","label":"New Style Jobseeker'…","fullName":"New Style Jobseeker's Allowance","dept":"DWP","deptKey":"dwp","serviceType":"benefit","deadline":null,"desc":"Contributory — paid alongside UC if NI record qualifies. 6-month time limit.","govuk_url":"https://www.gov.uk/jobseekers-allowance/new-style-jsa","proactive":true,"gated":true,"universal":false,"means_tested":false,"eligibilitySummary":"Contributory benefit for jobseekers based on NI record. Paid for up to 6 months alongside Universal Credit. Requires 2 full tax years of Class 1 NI contributions."}},{"data":{"id":"dwp-new-style-esa","label":"New Style ESA","fullName":"New Style ESA","dept":"DWP","deptKey":"dwp","serviceType":"benefit","deadline":null,"desc":"If health prevents work. Requires fit note from GP and Work Capability Assessment.","govuk_url":"https://www.gov.uk/employment-support-allowance/eligibility","proactive":true,"gated":false,"universal":false,"means_tested":false,"eligibilitySummary":"Contributory benefit for people whose health condition prevents or limits their ability to work. Requires NI contributions in the last two tax years and a fit note from a GP."}},{"data":{"id":"dwp-maternity-allowance","label":"Maternity Allowance","fullName":"Maternity Allowance","dept":"DWP","deptKey":"dwp","serviceType":"benefit","deadline":null,"desc":"If not eligible for SMP. For self-employed or recently employed. Up to 39 weeks.","govuk_url":"https://www.gov.uk/maternity-allowance","proactive":true,"gated":false,"universal":false,"means_tested":false,"eligibilitySummary":"For those not eligible for Statutory Maternity Pay — typically self-employed, recently changed jobs, or agency workers. Up to 39 weeks of payments."}},{"data":{"id":"dwp-sure-start-grant","label":"Sure Start Maternity…","fullName":"Sure Start Maternity Grant","dept":"DWP","deptKey":"dwp","serviceType":"grant","deadline":"3 months","desc":"One-off £500 if on qualifying benefits. Usually first child only. Apply within 3 months of birth.","govuk_url":"https://www.gov.uk/sure-start-maternity-grant","proactive":true,"gated":true,"universal":false,"means_tested":true,"eligibilitySummary":"One-off £500 payment to help with costs of a new baby. Usually only for the first child. Must be on a qualifying benefit. Apply from 11 weeks before due date to 3 months after birth."}},{"data":{"id":"dwp-ni-credits","label":"National Insurance c…","fullName":"National Insurance credits","dept":"DWP","deptKey":"dwp","serviceType":"entitlement","deadline":null,"desc":"Automatically awarded on UC or JSA. Protects State Pension record while not working.","govuk_url":"https://www.gov.uk/national-insurance-credits","proactive":true,"gated":true,"universal":false,"means_tested":false,"eligibilitySummary":"NI credits fill gaps in your NI record when you are not working and paying contributions. Automatically awarded with UC, JSA, ESA, and certain other benefits. Protects your State Pension entitlement."}},{"data":{"id":"dwp-carers-allowance","label":"Carer's Allowance","fullName":"Carer's Allowance","dept":"DWP","deptKey":"dwp","serviceType":"benefit","deadline":null,"desc":"If caring 35+ hours/week and person cared for receives PIP or Attendance Allowance.","govuk_url":"https://www.gov.uk/carers-allowance","proactive":true,"gated":true,"universal":false,"means_tested":false,"eligibilitySummary":"£81.90/week (2024/25) for carers spending at least 35 hours/week caring for someone receiving a qualifying disability benefit. Also provides NI credits and a gateway to UC Carer element."}},{"data":{"id":"dwp-uc-carer","label":"UC Carer element","fullName":"UC Carer element","dept":"DWP","deptKey":"dwp","serviceType":"entitlement","deadline":null,"desc":"Additional ~£185/month in Universal Credit if eligible for Carer's Allowance.","govuk_url":"https://www.gov.uk/universal-credit/what-youll-get","proactive":true,"gated":true,"universal":false,"means_tested":true,"eligibilitySummary":"An extra £198.31/month (2024/25) added to Universal Credit for people who are eligible for Carer's Allowance. No need to actually claim Carer's Allowance — just be eligible."}},{"data":{"id":"dwp-access-to-work","label":"Access to Work","fullName":"Access to Work","dept":"DWP","deptKey":"dwp","serviceType":"grant","deadline":null,"desc":"Grants for workplace adaptations, travel costs and support workers. Apply before starting job.","govuk_url":"https://www.gov.uk/access-to-work","proactive":true,"gated":true,"universal":false,"means_tested":false,"eligibilitySummary":"Grants to help disabled people and those with health conditions to start or stay in work. Covers workplace adaptations, travel costs, support workers, communication support, and mental health support."}},{"data":{"id":"dwp-uc-health","label":"UC limited capabilit…","fullName":"UC limited capability element","dept":"DWP","deptKey":"dwp","serviceType":"entitlement","deadline":null,"desc":"Higher UC payment after Work Capability Assessment. Requires fit note and medical evidence.","govuk_url":"https://www.gov.uk/universal-credit/what-youll-get","proactive":true,"gated":true,"universal":false,"means_tested":true,"eligibilitySummary":"Extra Universal Credit for those whose health condition limits or prevents work. Requires a Work Capability Assessment (WCA). Limited Capability for Work and Work-Related Activity (LCWRA) adds £416/month."}},{"data":{"id":"dwp-child-maintenance","label":"Child Maintenance Se…","fullName":"Child Maintenance Service","dept":"DWP","deptKey":"dwp","serviceType":"application","deadline":null,"desc":"If parents cannot agree privately. CMS calculates based on paying parent's income.","govuk_url":"https://www.gov.uk/child-maintenance","proactive":false,"gated":true,"universal":false,"means_tested":false,"eligibilitySummary":"A statutory service for parents who cannot reach a private maintenance arrangement. CMS calculates payments based on the paying parent's income. A fee applies to use the Collect & Pay service."}},{"data":{"id":"dwp-ni-number","label":"National Insurance n…","fullName":"National Insurance number","dept":"DWP","deptKey":"dwp","serviceType":"registration","deadline":null,"desc":"Apply online via DWP. Required before starting work or claiming benefits in the UK.","govuk_url":"https://www.gov.uk/apply-national-insurance-number","proactive":true,"gated":true,"universal":false,"means_tested":false,"eligibilitySummary":"Required before starting work or claiming benefits in the UK. Apply online via DWP. Must have the right to work in the UK. UK citizens should already have one — applies mainly to new arrivals."}},{"data":{"id":"nhs-gp-register","label":"Register with new GP","fullName":"Register with new GP","dept":"NHS","deptKey":"nhs","serviceType":"registration","deadline":null,"desc":"Register at nearest surgery. Medical records transfer automatically from old practice.","govuk_url":"https://www.gov.uk/register-with-a-gp","proactive":true,"gated":false,"universal":true,"means_tested":false,"eligibilitySummary":"Anyone living in England can register with a GP practice. Practices must accept patients living in their area. Medical records transfer automatically from old practice."}},{"data":{"id":"nhs-healthy-start","label":"Healthy Start vouchers","fullName":"Healthy Start vouchers","dept":"NHS","deptKey":"nhs","serviceType":"benefit","deadline":null,"desc":"Food and milk vouchers if on qualifying benefits and 10+ weeks pregnant.","govuk_url":"https://www.healthystart.nhs.uk/","proactive":true,"gated":false,"universal":false,"means_tested":true,"eligibilitySummary":"Prepaid card to buy fruit, vegetables, milk and infant formula for eligible pregnant women and parents of children under 4. Worth £8.50/week for pregnant women; £4.25/week per child under 1."}},{"data":{"id":"nhs-free-prescriptions-pregnancy","label":"Free prescriptions &…","fullName":"Free prescriptions & dental (pregnancy)","dept":"NHS","deptKey":"nhs","serviceType":"entitlement","deadline":null,"desc":"Automatic from positive pregnancy test. Continues until baby is 1 year old.","govuk_url":"https://www.gov.uk/help-nhs-costs/maternity-exemption-certificates","proactive":true,"gated":false,"universal":true,"means_tested":false,"eligibilitySummary":"Free NHS prescriptions and dental treatment for all pregnant women and for 12 months after the birth. Apply for a Maternity Exemption Certificate via midwife or GP."}},{"data":{"id":"nhs-free-prescriptions","label":"Free prescriptions (…","fullName":"Free prescriptions (disability)","dept":"NHS","deptKey":"nhs","serviceType":"entitlement","deadline":null,"desc":"Prepayment certificate at £111/year. Free if on qualifying benefit or certain conditions.","govuk_url":"https://www.gov.uk/get-free-prescriptions-on-the-nhs","proactive":true,"gated":true,"universal":false,"means_tested":false,"eligibilitySummary":"Free NHS prescriptions if receiving PIP, DLA, ESA, or on UC with certain health conditions, or if diagnosed with a qualifying medical condition (e.g. diabetes, epilepsy, thyroid conditions)."}},{"data":{"id":"nhs-care-assessment","label":"Care needs assessment","fullName":"Care needs assessment","dept":"NHS","deptKey":"nhs","serviceType":"application","deadline":null,"desc":"Local authority assesses care needs. Can lead to a care plan and possible funded support.","govuk_url":"https://www.gov.uk/care-needs-assessment-adults","proactive":true,"gated":false,"universal":true,"means_tested":false,"eligibilitySummary":"Any adult can request a care needs assessment from their local authority. Free and means-independent — the assessment itself is free, though resulting care may be means-tested. Can lead to a care plan and funded support."}},{"data":{"id":"dvla-update-address","label":"Update driving licen…","fullName":"Update driving licence address","dept":"DVLA","deptKey":"dvla","serviceType":"obligation","deadline":"3 months","desc":"Legal requirement to update within 3 months of moving. Can be done online.","govuk_url":"https://www.gov.uk/change-address-driving-licence","proactive":true,"gated":false,"universal":true,"means_tested":false,"eligibilitySummary":"A legal requirement for all driving licence holders within 3 months of moving. Can be done quickly online for free. Failure to update is technically an offence."}},{"data":{"id":"dvla-name-change","label":"Update driving licen…","fullName":"Update driving licence (name change)","dept":"DVLA","deptKey":"dvla","serviceType":"obligation","deadline":null,"desc":"D1 form or online. Legal requirement — licence must reflect current name.","govuk_url":"https://www.gov.uk/change-name-driving-licence","proactive":true,"gated":true,"universal":true,"means_tested":false,"eligibilitySummary":"A legal requirement for driving licence holders who have changed their name — after marriage, civil partnership, deed poll or statutory declaration. Must be updated to reflect current legal name."}},{"data":{"id":"dvla-cancel-licence","label":"Cancel driving licence","fullName":"Cancel driving licence","dept":"DVLA","deptKey":"dvla","serviceType":"obligation","deadline":null,"desc":"Covered by Tell Us Once if used after a death. Otherwise notify DVLA directly.","govuk_url":"https://www.gov.uk/dvla/forms/d27","proactive":true,"gated":true,"universal":true,"means_tested":false,"eligibilitySummary":"Must notify DVLA when a driving licence holder dies. Usually handled automatically by Tell Us Once after death registration. Send the licence to DVLA if available."}},{"data":{"id":"dvla-notify-condition","label":"Notify DVLA of medic…","fullName":"Notify DVLA of medical condition","dept":"DVLA","deptKey":"dvla","serviceType":"obligation","deadline":null,"desc":"Legal requirement for many conditions. May affect licence. Check gov.uk list of notifiable conditions.","govuk_url":"https://www.gov.uk/health-conditions-and-driving","proactive":true,"gated":false,"universal":false,"means_tested":false,"eligibilitySummary":"A legal duty to notify DVLA of any medical condition or treatment that may affect safe driving. Covers a wide range of physical and mental health conditions. Failure to notify can invalidate insurance."}},{"data":{"id":"ch-register-ltd","label":"Register limited com…","fullName":"Register limited company (IN01)","dept":"Companies House","deptKey":"ch","serviceType":"registration","deadline":null,"desc":"Company name must be available. Same-day registration possible online.","govuk_url":"https://www.gov.uk/limited-company-formation/register-your-company","proactive":true,"gated":false,"universal":false,"means_tested":false,"eligibilitySummary":"Anyone can register a limited company in the UK. Same-day registration online for £50. Company name must be available and not too similar to existing names. At least one director required."}},{"data":{"id":"hmcts-probate","label":"Apply for probate","fullName":"Apply for probate","dept":"HMCTS","deptKey":"hmcts","serviceType":"legal_process","deadline":null,"desc":"Required if estate exceeds £10k with most financial institutions. Currently 16+ week wait.","govuk_url":"https://www.gov.uk/applying-for-probate","proactive":true,"gated":true,"universal":false,"means_tested":false,"eligibilitySummary":"Grants legal authority to deal with the estate. Required by most banks, insurers and financial institutions for estates over £10,000. Currently experiencing 16+ week processing times. Costs £273 for estates over £5,000."}},{"data":{"id":"hmcts-divorce","label":"Divorce application …","fullName":"Divorce application (D8)","dept":"HMCTS","deptKey":"hmcts","serviceType":"legal_process","deadline":null,"desc":"Online or paper. Conditional order after 20 weeks; final order 6 weeks later.","govuk_url":"https://www.gov.uk/divorce","proactive":true,"gated":false,"universal":false,"means_tested":false,"eligibilitySummary":"No-fault divorce since April 2022 — no reasons needed. Apply online or on paper. Minimum timescale: 26 weeks (20 weeks to Conditional Order + 6 weeks to Final Order). Can apply jointly or individually."}},{"data":{"id":"hmcts-financial-order","label":"Financial Consent Or…","fullName":"Financial Consent Order","dept":"HMCTS","deptKey":"hmcts","serviceType":"legal_process","deadline":null,"desc":"Legally binding division of assets and pension. Strongly advised before final divorce order.","govuk_url":"https://www.gov.uk/money-property-when-relationship-ends/reaching-an-agreement","proactive":true,"gated":true,"universal":false,"means_tested":false,"eligibilitySummary":"A court-approved agreement making division of assets, property and pension legally binding. Strongly advised before the Final Divorce Order — without it, either party can make future financial claims. Usually drafted by solicitors."}},{"data":{"id":"hmcts-child-arrangements","label":"Child Arrangements O…","fullName":"Child Arrangements Order","dept":"HMCTS","deptKey":"hmcts","serviceType":"legal_process","deadline":null,"desc":"If no agreement on living arrangements. Mediation usually required first.","govuk_url":"https://www.gov.uk/looking-after-children-divorce/apply-for-court-order","proactive":false,"gated":true,"universal":false,"means_tested":false,"eligibilitySummary":"A court order specifying where children live and how much time they spend with each parent. Required only when parents cannot agree through negotiation or mediation. MIAM (mediation) must usually be attempted first."}},{"data":{"id":"hmcts-legal-aid","label":"Legal Aid application","fullName":"Legal Aid application","dept":"HMCTS","deptKey":"hmcts","serviceType":"entitlement","deadline":null,"desc":"Means and merits tested. Available in domestic abuse cases. Applied via Legal Aid Agency.","govuk_url":"https://www.gov.uk/legal-aid","proactive":true,"gated":false,"universal":false,"means_tested":true,"eligibilitySummary":"Government funding for legal advice and representation in certain cases. Both means-tested (income/capital) and merits-tested (strength of case). Domestic abuse cases have wider automatic eligibility. Applied via a legal aid solicitor."}},{"data":{"id":"la-electoral-roll","label":"Electoral roll update","fullName":"Electoral roll update","dept":"Local Authority","deptKey":"la","serviceType":"registration","deadline":null,"desc":"Update at both old and new address. Affects jury duty and credit checks.","govuk_url":"https://www.gov.uk/register-to-vote","proactive":true,"gated":false,"universal":true,"means_tested":false,"eligibilitySummary":"Register to vote at your new address. Affects eligibility for jury duty and credit checks. Can update online in 5 minutes. Also de-register from old address."}},{"data":{"id":"la-council-tax","label":"Council Tax registra…","fullName":"Council Tax registration","dept":"Local Authority","deptKey":"la","serviceType":"obligation","deadline":null,"desc":"Register at new address and close account at old. Various discounts may apply.","govuk_url":"https://www.gov.uk/council-tax","proactive":true,"gated":false,"universal":true,"means_tested":false,"eligibilitySummary":"Any adult who is the resident or owner of a domestic property is liable for Council Tax. Register at your new address and close the account at your old address. Various discounts and exemptions may apply."}},{"data":{"id":"la-council-tax-single-discount","label":"Council Tax single p…","fullName":"Council Tax single person discount","dept":"Local Authority","deptKey":"la","serviceType":"entitlement","deadline":null,"desc":"25% discount if now living alone after bereavement or separation.","govuk_url":"https://www.gov.uk/council-tax-discounts","proactive":true,"gated":true,"universal":false,"means_tested":false,"eligibilitySummary":"A 25% reduction in Council Tax if you are the only adult resident in a property. Apply to your local council after bereavement, divorce/separation, or a household member moving out."}},{"data":{"id":"la-council-tax-reduction","label":"Council Tax Reduction","fullName":"Council Tax Reduction","dept":"Local Authority","deptKey":"la","serviceType":"benefit","deadline":null,"desc":"Apply to local council. Can reduce bill to zero on very low income.","govuk_url":"https://www.gov.uk/apply-council-tax-reduction","proactive":true,"gated":true,"universal":false,"means_tested":true,"eligibilitySummary":"A means-tested discount on your Council Tax bill. Administered by local councils — schemes vary by area. Can reduce the bill significantly or to zero on very low income."}},{"data":{"id":"la-bus-pass","label":"Free bus pass","fullName":"Free bus pass","dept":"Local Authority","deptKey":"la","serviceType":"entitlement","deadline":null,"desc":"Available from State Pension age. Apply via local council.","govuk_url":"https://www.gov.uk/apply-for-elderly-person-bus-pass","proactive":true,"gated":true,"universal":true,"means_tested":false,"eligibilitySummary":"Free off-peak bus travel anywhere in England from State Pension age. Also available to some disabled people. Apply via local council — usually processed in a few weeks."}},{"data":{"id":"la-school-place","label":"School place applica…","fullName":"School place application","dept":"Local Authority","deptKey":"la","serviceType":"application","deadline":"Jan 15 / Oct 31","desc":"Primary: apply by 15 January. Secondary: 31 October. Via local authority admissions.","govuk_url":"https://www.gov.uk/apply-for-primary-school-place","proactive":true,"gated":false,"universal":true,"means_tested":false,"eligibilitySummary":"Apply for school places through the local authority. Key deadlines: Primary Reception — 15 January; Secondary Year 7 — 31 October. Local catchment area affects admission chances."}},{"data":{"id":"la-free-school-meals","label":"Free School Meals","fullName":"Free School Meals","dept":"Local Authority","deptKey":"la","serviceType":"entitlement","deadline":null,"desc":"Auto-eligible if on UC with income under £7,400. Apply via school or local authority.","govuk_url":"https://www.gov.uk/apply-free-school-meals","proactive":true,"gated":true,"universal":false,"means_tested":true,"eligibilitySummary":"Free school meals for children at state schools if parents are on qualifying benefits. Automatic if on Universal Credit with annual net earned income under £7,400. Unlocks Pupil Premium funding for the school."}},{"data":{"id":"la-send-ehc","label":"SEND EHC plan assess…","fullName":"SEND EHC plan assessment","dept":"Local Authority","deptKey":"la","serviceType":"application","deadline":"20 weeks","desc":"For children with complex needs. Local Authority has 20 weeks to issue the plan.","govuk_url":"https://www.gov.uk/children-with-special-educational-needs/education-health-care-plans","proactive":true,"gated":true,"universal":false,"means_tested":false,"eligibilitySummary":"An Education, Health and Care (EHC) plan for children and young people aged 0-25 with complex SEND needs that cannot be met through standard school support. Local Authority must complete the assessment within 20 weeks."}},{"data":{"id":"la-blue-badge","label":"Blue Badge","fullName":"Blue Badge","dept":"Local Authority","deptKey":"la","serviceType":"entitlement","deadline":null,"desc":"Auto-qualify on Enhanced Rate PIP mobility. Apply via local council.","govuk_url":"https://www.gov.uk/apply-blue-badge","proactive":true,"gated":true,"universal":false,"means_tested":false,"eligibilitySummary":"Allows parking in disabled bays and on yellow lines. Auto-qualify if receiving Enhanced Rate PIP mobility or DLA (highest mobility rate). Others apply discretionarily. Apply via local council. Costs up to £10."}},{"data":{"id":"la-disabled-facilities-grant","label":"Disabled Facilities …","fullName":"Disabled Facilities Grant","dept":"Local Authority","deptKey":"la","serviceType":"grant","deadline":null,"desc":"Up to £30k for home adaptations. Means-tested. Apply via local authority.","govuk_url":"https://www.gov.uk/disabled-facilities-grants","proactive":true,"gated":false,"universal":false,"means_tested":true,"eligibilitySummary":"Up to £30,000 (England) towards adaptations to help a disabled person live independently at home: ramps, stairlifts, wider doorways, accessible bathrooms. Means-tested for applicants over 18. Occupational Therapist assessment required."}},{"data":{"id":"la-carers-assessment","label":"Carer's Assessment","fullName":"Carer's Assessment","dept":"Local Authority","deptKey":"la","serviceType":"application","deadline":null,"desc":"Request from local council. Identifies support needs and may unlock local funding.","govuk_url":"https://www.gov.uk/carers-assessment","proactive":true,"gated":false,"universal":true,"means_tested":false,"eligibilitySummary":"Any adult carer can request a free Carer's Assessment from their local authority. Identifies the carer's own needs and may unlock local support, respite care, or one-off grants."}},{"data":{"id":"la-business-rates","label":"Business rates regis…","fullName":"Business rates registration","dept":"Local Authority","deptKey":"la","serviceType":"obligation","deadline":null,"desc":"If using non-domestic premises. Small Business Relief may reduce or eliminate the charge.","govuk_url":"https://www.gov.uk/introduction-to-business-rates","proactive":true,"gated":false,"universal":false,"means_tested":false,"eligibilitySummary":"Business rates are charged on non-domestic properties used for business. Valuation Office Agency assesses rateable value; local authority bills and collects. Small Business Rate Relief eliminates the charge for properties under £12,000 rateable value."}},{"data":{"id":"la-food-hygiene","label":"Food hygiene registr…","fullName":"Food hygiene registration","dept":"Local Authority","deptKey":"la","serviceType":"obligation","deadline":"28 days","desc":"Any food business must register with local authority before trading.","govuk_url":"https://www.gov.uk/food-business-registration","proactive":true,"gated":false,"universal":false,"means_tested":false,"eligibilitySummary":"Any business that sells, cooks, stores, handles, prepares or distributes food must register with their local authority at least 28 days before opening. Free to register. Required for home bakers, market stalls, restaurants, and caterers."}},{"data":{"id":"ho-visa","label":"Visa / leave to enter","fullName":"Visa / leave to enter","dept":"Home Office","deptKey":"ho","serviceType":"application","deadline":null,"desc":"Type depends on purpose. Via UK Visas and Immigration. Must be in place before entry.","govuk_url":"https://www.gov.uk/browse/visas-immigration/getting-a-visa","proactive":true,"gated":false,"universal":false,"means_tested":false,"eligibilitySummary":"Non-UK and non-Irish nationals wishing to enter the UK must apply for the appropriate visa. Type depends on purpose: work, study, family reunion, etc. Must usually be obtained before travel."}},{"data":{"id":"ho-brp","label":"Biometric Residence …","fullName":"Biometric Residence Permit","dept":"Home Office","deptKey":"ho","serviceType":"document","deadline":"10 days","desc":"Collect from post office within 10 days of arriving. Proves right to work and rent.","govuk_url":"https://www.gov.uk/biometric-residence-permits","proactive":true,"gated":true,"universal":false,"means_tested":false,"eligibilitySummary":"Issued to non-UK nationals granted leave to remain for more than 6 months. Collect from the named post office within 10 days of arrival in the UK. Required to prove right to work and rent."}},{"data":{"id":"ho-life-in-uk","label":"Life in the UK test","fullName":"Life in the UK test","dept":"Home Office","deptKey":"ho","serviceType":"application","deadline":null,"desc":"Required for ILR and naturalisation. Must pass before applying.","govuk_url":"https://www.gov.uk/life-in-the-uk-test","proactive":true,"gated":true,"universal":false,"means_tested":false,"eligibilitySummary":"A 45-minute test on British history, culture and values. Required before applying for Indefinite Leave to Remain or British citizenship. Exempt if under 18, over 65, or with certain disabilities."}},{"data":{"id":"ho-ilr","label":"Indefinite Leave to …","fullName":"Indefinite Leave to Remain","dept":"Home Office","deptKey":"ho","serviceType":"application","deadline":null,"desc":"After qualifying period. Continuous residence and income requirements apply.","govuk_url":"https://www.gov.uk/indefinite-leave-to-remain","proactive":true,"gated":true,"universal":false,"means_tested":false,"eligibilitySummary":"Gives the right to live, work and study in the UK without immigration restrictions. Usually requires 5 years of lawful residence on an eligible visa. Must not have spent more than 180 days outside the UK in any 12-month period."}},{"data":{"id":"ho-citizenship","label":"British citizenship …","fullName":"British citizenship (naturalisation)","dept":"Home Office","deptKey":"ho","serviceType":"application","deadline":null,"desc":"After 1 year of ILR. Language and residency requirements. AN1 form.","govuk_url":"https://www.gov.uk/become-a-british-citizen/naturalisation","proactive":true,"gated":true,"universal":false,"means_tested":false,"eligibilitySummary":"Apply to become a British citizen after holding ILR for at least 12 months. Must have lived in the UK for 5 years, with no more than 450 days abroad in that period and 90 days in the final year."}},{"data":{"id":"opg-lpa","label":"Lasting Power of Att…","fullName":"Lasting Power of Attorney","dept":"OPG","deptKey":"opg","serviceType":"legal_process","deadline":null,"desc":"Health and welfare and/or property and finance. Register before mental capacity is lost.","govuk_url":"https://www.gov.uk/power-of-attorney","proactive":true,"gated":false,"universal":true,"means_tested":false,"eligibilitySummary":"A legal document appointing trusted people (attorneys) to make decisions on your behalf. Two types: Property & Financial Affairs (can be used immediately), and Health & Welfare (only if you lose capacity). Must be registered with OPG before use."}},{"data":{"id":"opg-lpa-activation","label":"Notify OPG of death","fullName":"Notify OPG of death","dept":"OPG","deptKey":"opg","serviceType":"obligation","deadline":null,"desc":"Notify OPG when LPA holder dies. The registered LPA then ceases to have effect.","govuk_url":"https://www.gov.uk/power-of-attorney/end-a-poa","proactive":true,"gated":true,"universal":false,"means_tested":false,"eligibilitySummary":"When the donor of an LPA dies, their attorneys must notify the Office of the Public Guardian and return the LPA document. The LPA automatically ceases to have effect on death."}},{"data":{"id":"lr-registration","label":"Land Registry regist…","fullName":"Land Registry registration (AP1)","dept":"Land Registry","deptKey":"lr","serviceType":"obligation","deadline":null,"desc":"Register new ownership. Solicitor handles. Required for mortgage to complete.","govuk_url":"https://www.gov.uk/registering-land-or-property-with-land-registry","proactive":true,"gated":true,"universal":true,"means_tested":false,"eligibilitySummary":"All property purchases in England and Wales must be registered at HM Land Registry. Usually handled by the solicitor/conveyancer. Priority period starts when the application is received — must be submitted promptly after completion."}},{"data":{"id":"other-passport-name","label":"Passport name change","fullName":"Passport name change","dept":"HMPO","deptKey":"other","serviceType":"document","deadline":null,"desc":"Not legally required after marriage but strongly recommended. Use marriage certificate.","govuk_url":"https://www.gov.uk/renew-adult-passport","proactive":true,"gated":true,"universal":true,"means_tested":false,"eligibilitySummary":"Not a legal requirement but strongly recommended after a name change. A passport in your new name is accepted as proof of identity for employment, travel, and financial services. Use the marriage certificate or deed poll as supporting evidence."}},{"data":{"id":"other-tv-licence-pension","label":"TV Licence concession","fullName":"TV Licence concession","dept":"TV Licensing","deptKey":"other","serviceType":"entitlement","deadline":null,"desc":"Free if aged 75+ AND receiving Pension Credit.","govuk_url":"https://www.gov.uk/tv-licence/get-a-free-or-discounted-tv-licence","proactive":true,"gated":true,"universal":false,"means_tested":false,"eligibilitySummary":"Free TV licence for households where at least one person is 75 or over AND receives Pension Credit. The 75+ person or their partner must be the Pension Credit claimant."}},{"data":{"id":"other-motability","label":"Motability scheme","fullName":"Motability scheme","dept":"Motability","deptKey":"other","serviceType":"entitlement","deadline":null,"desc":"Car or scooter lease using mobility component. Requires Enhanced Rate PIP mobility.","govuk_url":"https://www.motability.co.uk/","proactive":true,"gated":true,"universal":false,"means_tested":false,"eligibilitySummary":"Lease a car, powered wheelchair or scooter by using the Enhanced Rate of the Mobility Component of PIP. The allowance is paid directly to Motability. No credit check required."}},{"data":{"id":"other-disabled-railcard","label":"Disabled Persons Rai…","fullName":"Disabled Persons Railcard","dept":"Rail Delivery Group","deptKey":"other","serviceType":"entitlement","deadline":null,"desc":"One third off most rail fares. Various disability benefits qualify automatically.","govuk_url":"https://www.disabledpersons-railcard.co.uk/","proactive":true,"gated":true,"universal":false,"means_tested":false,"eligibilitySummary":"1/3 off most rail fares for the holder and a companion. Qualifying conditions include receiving PIP, DLA, Attendance Allowance, being registered blind/partially sighted, or having epilepsy or severe mental or physical disability. Costs £20/year."}},{"data":{"id":"other-employers-liability","label":"Employers' Liability…","fullName":"Employers' Liability Insurance","dept":"Other","deptKey":"other","serviceType":"obligation","deadline":"Before employing","desc":"Legal requirement if employing anyone. Minimum £5m cover.","govuk_url":"https://www.gov.uk/employers-liability-insurance","proactive":true,"gated":true,"universal":false,"means_tested":false,"eligibilitySummary":"A legal requirement for virtually all businesses that employ staff. Must have at least £5 million cover. Certificate must be displayed at each workplace. Penalties of up to £2,500/day for non-compliance."}},{"data":{"id":"other-dbs","label":"DBS check","fullName":"DBS check","dept":"DBS","deptKey":"other","serviceType":"application","deadline":null,"desc":"If working with children or vulnerable adults. Standard or enhanced check.","govuk_url":"https://www.gov.uk/dbs-check-applicant-criminal-record","proactive":false,"gated":false,"universal":false,"means_tested":false,"eligibilitySummary":"A criminal record check required for roles involving work with children or vulnerable adults. Employers apply on behalf of the employee. Three levels: Basic (anyone), Standard (specified roles), Enhanced (children/vulnerable adult work)."}},{"data":{"id":"other-right-to-work","label":"Right to work check","fullName":"Right to work check","dept":"Employer","deptKey":"other","serviceType":"obligation","deadline":null,"desc":"Employer obligation to verify before hiring. Online share code or document check.","govuk_url":"https://www.gov.uk/check-job-applicant-right-to-work","proactive":true,"gated":true,"universal":true,"means_tested":false,"eligibilitySummary":"Employers are legally required to verify that every employee has the right to work in the UK before they start. For non-UK/Irish nationals this is typically done via a Home Office share code online service."}},{"data":{"id":"other-pupil-premium","label":"Pupil Premium","fullName":"Pupil Premium","dept":"DfE / School","deptKey":"other","serviceType":"entitlement","deadline":null,"desc":"DfE funding direct to school. Automatic if child has ever qualified for Free School Meals.","govuk_url":"https://www.gov.uk/government/publications/pupil-premium","proactive":true,"gated":true,"universal":false,"means_tested":false,"eligibilitySummary":"Additional funding paid directly to the school (£1,480/year per eligible pupil at primary, £1,050 at secondary). Automatic once Free School Meals eligibility is confirmed. Parents should ensure the school knows the child is eligible."}},{"data":{"id":"other-statutory-redundancy","label":"Statutory Redundancy…","fullName":"Statutory Redundancy Pay","dept":"Employer / Tribunal","deptKey":"other","serviceType":"entitlement","deadline":null,"desc":"Employer obligation based on age and length of service. Employment tribunal if refused.","govuk_url":"https://www.gov.uk/redundancy-payments-helpline","proactive":true,"gated":false,"universal":false,"means_tested":false,"eligibilitySummary":"A legal entitlement for employees made compulsorily redundant after 2 or more years of continuous employment. Amount depends on age, weekly pay (capped at £643/week), and length of service. Employer must pay — Employment Tribunal if they refuse."}},{"data":{"id":"other-carers-leave","label":"Carer's leave (emplo…","fullName":"Carer's leave (employer)","dept":"Employer","deptKey":"other","serviceType":"entitlement","deadline":null,"desc":"5 days unpaid per year. Statutory right since April 2024.","govuk_url":"https://www.gov.uk/carers-leave","proactive":true,"gated":false,"universal":false,"means_tested":false,"eligibilitySummary":"Up to 5 days of unpaid leave per year from day 1 of employment to provide or arrange care for a dependant with a long-term care need. A statutory right since April 2024. Can be taken as individual days or half days."}},{"data":{"id":"other-help-to-buy","label":"First Homes / Help t…","fullName":"First Homes / Help to Buy scheme","dept":"Homes England","deptKey":"other","serviceType":"grant","deadline":null,"desc":"Must be arranged before purchase completes. Various first-time buyer schemes available.","govuk_url":"https://www.gov.uk/first-homes-scheme","proactive":true,"gated":false,"universal":false,"means_tested":true,"eligibilitySummary":"First Homes offers new-build properties at a minimum 30% discount to first-time buyers. Other schemes include Shared Ownership and Mortgage Guarantee. Must be a first-time buyer. Income caps and property price limits apply."}}];
    var EDGES_DATA   = [{"data":{"id":"e0","source":"gro-register-birth","target":"hmrc-child-benefit","type":"ENABLES"}},{"data":{"id":"e1","source":"gro-register-birth","target":"hmrc-free-childcare-15","type":"ENABLES"}},{"data":{"id":"e2","source":"gro-register-birth","target":"dwp-sure-start-grant","type":"ENABLES"}},{"data":{"id":"e3","source":"hmrc-free-childcare-15","target":"hmrc-free-childcare-30","type":"ENABLES"}},{"data":{"id":"e4","source":"hmrc-smp","target":"hmrc-spl","type":"ENABLES"}},{"data":{"id":"e5","source":"dwp-maternity-allowance","target":"hmrc-spl","type":"ENABLES"}},{"data":{"id":"e6","source":"hmrc-child-benefit","target":"hmrc-tax-free-childcare","type":"ENABLES"}},{"data":{"id":"e7","source":"gro-register-death","target":"gro-death-certificate","type":"ENABLES"}},{"data":{"id":"e8","source":"gro-register-death","target":"dwp-tell-us-once","type":"ENABLES"}},{"data":{"id":"e9","source":"gro-register-death","target":"dwp-bereavement-support","type":"ENABLES"}},{"data":{"id":"e10","source":"gro-register-death","target":"hmcts-probate","type":"ENABLES"}},{"data":{"id":"e11","source":"gro-death-certificate","target":"hmcts-probate","type":"REQUIRES"}},{"data":{"id":"e12","source":"hmcts-probate","target":"hmrc-iht400","type":"ENABLES"}},{"data":{"id":"e13","source":"dwp-tell-us-once","target":"dvla-cancel-licence","type":"ENABLES"}},{"data":{"id":"e14","source":"dwp-tell-us-once","target":"la-council-tax-single-discount","type":"ENABLES"}},{"data":{"id":"e15","source":"dwp-tell-us-once","target":"opg-lpa-activation","type":"ENABLES"}},{"data":{"id":"e16","source":"gro-give-notice","target":"gro-marriage-cert","type":"ENABLES"}},{"data":{"id":"e17","source":"gro-marriage-cert","target":"other-passport-name","type":"ENABLES"}},{"data":{"id":"e18","source":"gro-marriage-cert","target":"dvla-name-change","type":"ENABLES"}},{"data":{"id":"e19","source":"gro-marriage-cert","target":"hmrc-marriage-allowance","type":"ENABLES"}},{"data":{"id":"e20","source":"gro-marriage-cert","target":"hmrc-update-records","type":"ENABLES"}},{"data":{"id":"e21","source":"gro-marriage-cert","target":"la-electoral-roll","type":"ENABLES"}},{"data":{"id":"e22","source":"hmrc-ni-check","target":"dwp-state-pension","type":"ENABLES"}},{"data":{"id":"e23","source":"dwp-state-pension","target":"dwp-pension-credit","type":"ENABLES"}},{"data":{"id":"e24","source":"dwp-pension-credit","target":"dwp-winter-fuel","type":"ENABLES"}},{"data":{"id":"e25","source":"dwp-pension-credit","target":"other-tv-licence-pension","type":"ENABLES"}},{"data":{"id":"e26","source":"dwp-state-pension","target":"la-bus-pass","type":"ENABLES"}},{"data":{"id":"e27","source":"dwp-state-pension","target":"hmrc-tax-on-pension","type":"ENABLES"}},{"data":{"id":"e28","source":"ch-register-ltd","target":"hmrc-corporation-tax","type":"ENABLES"}},{"data":{"id":"e29","source":"ch-register-ltd","target":"hmrc-self-assessment","type":"ENABLES"}},{"data":{"id":"e30","source":"ch-register-ltd","target":"hmrc-paye","type":"ENABLES"}},{"data":{"id":"e31","source":"hmrc-register-sole-trader","target":"hmrc-self-assessment","type":"ENABLES"}},{"data":{"id":"e32","source":"hmrc-paye","target":"other-employers-liability","type":"REQUIRES"}},{"data":{"id":"e33","source":"hmrc-vat","target":"hmrc-mtd","type":"ENABLES"}},{"data":{"id":"e34","source":"hmrc-corporation-tax","target":"hmrc-vat","type":"ENABLES"}},{"data":{"id":"e35","source":"hmrc-lisa","target":"hmrc-sdlt","type":"ENABLES"}},{"data":{"id":"e36","source":"hmrc-sdlt","target":"lr-registration","type":"REQUIRES"}},{"data":{"id":"e37","source":"lr-registration","target":"la-electoral-roll","type":"ENABLES"}},{"data":{"id":"e38","source":"lr-registration","target":"la-council-tax","type":"ENABLES"}},{"data":{"id":"e39","source":"la-council-tax","target":"la-council-tax-reduction","type":"ENABLES"}},{"data":{"id":"e40","source":"hmrc-p45","target":"dwp-universal-credit","type":"ENABLES"}},{"data":{"id":"e41","source":"hmrc-p45","target":"hmrc-tax-refund","type":"ENABLES"}},{"data":{"id":"e42","source":"hmrc-p45","target":"dwp-new-style-jsa","type":"ENABLES"}},{"data":{"id":"e43","source":"dwp-universal-credit","target":"dwp-ni-credits","type":"ENABLES"}},{"data":{"id":"e44","source":"dwp-universal-credit","target":"la-council-tax-reduction","type":"ENABLES"}},{"data":{"id":"e45","source":"dwp-new-style-jsa","target":"dwp-ni-credits","type":"ENABLES"}},{"data":{"id":"e46","source":"dwp-pip","target":"other-motability","type":"ENABLES"}},{"data":{"id":"e47","source":"dwp-pip","target":"la-blue-badge","type":"ENABLES"}},{"data":{"id":"e48","source":"dwp-pip","target":"dwp-carers-allowance","type":"ENABLES"}},{"data":{"id":"e49","source":"dwp-pip","target":"dwp-uc-health","type":"ENABLES"}},{"data":{"id":"e50","source":"dwp-pip","target":"dwp-access-to-work","type":"ENABLES"}},{"data":{"id":"e51","source":"dwp-pip","target":"other-disabled-railcard","type":"ENABLES"}},{"data":{"id":"e52","source":"dwp-pip","target":"nhs-free-prescriptions","type":"ENABLES"}},{"data":{"id":"e53","source":"dwp-attendance-allowance","target":"la-blue-badge","type":"ENABLES"}},{"data":{"id":"e54","source":"dwp-attendance-allowance","target":"dwp-carers-allowance","type":"ENABLES"}},{"data":{"id":"e55","source":"dwp-attendance-allowance","target":"other-disabled-railcard","type":"ENABLES"}},{"data":{"id":"e56","source":"dwp-carers-allowance","target":"dwp-uc-carer","type":"ENABLES"}},{"data":{"id":"e57","source":"dwp-carers-allowance","target":"hmrc-carers-credit","type":"ENABLES"}},{"data":{"id":"e58","source":"opg-lpa","target":"opg-lpa-activation","type":"ENABLES"}},{"data":{"id":"e59","source":"hmcts-legal-aid","target":"hmcts-divorce","type":"ENABLES"}},{"data":{"id":"e60","source":"hmcts-divorce","target":"hmcts-financial-order","type":"ENABLES"}},{"data":{"id":"e61","source":"hmcts-divorce","target":"hmcts-child-arrangements","type":"ENABLES"}},{"data":{"id":"e62","source":"hmcts-divorce","target":"dwp-child-maintenance","type":"ENABLES"}},{"data":{"id":"e63","source":"hmcts-divorce","target":"hmrc-cancel-marriage-allowance","type":"ENABLES"}},{"data":{"id":"e64","source":"hmcts-divorce","target":"dwp-universal-credit","type":"ENABLES"}},{"data":{"id":"e65","source":"hmcts-divorce","target":"hmrc-child-benefit-transfer","type":"ENABLES"}},{"data":{"id":"e66","source":"hmcts-divorce","target":"la-council-tax-single-discount","type":"ENABLES"}},{"data":{"id":"e67","source":"la-school-place","target":"la-free-school-meals","type":"ENABLES"}},{"data":{"id":"e68","source":"la-free-school-meals","target":"other-pupil-premium","type":"ENABLES"}},{"data":{"id":"e69","source":"la-school-place","target":"la-send-ehc","type":"ENABLES"}},{"data":{"id":"e70","source":"ho-visa","target":"ho-brp","type":"ENABLES"}},{"data":{"id":"e71","source":"ho-brp","target":"dwp-ni-number","type":"ENABLES"}},{"data":{"id":"e72","source":"ho-brp","target":"nhs-gp-register","type":"ENABLES"}},{"data":{"id":"e73","source":"ho-brp","target":"other-right-to-work","type":"ENABLES"}},{"data":{"id":"e74","source":"ho-brp","target":"ho-life-in-uk","type":"ENABLES"}},{"data":{"id":"e75","source":"ho-life-in-uk","target":"ho-ilr","type":"REQUIRES"}},{"data":{"id":"e76","source":"dwp-ni-number","target":"ho-ilr","type":"REQUIRES"}},{"data":{"id":"e77","source":"ho-ilr","target":"ho-citizenship","type":"ENABLES"}}];
    var EVENTS_DATA  = [{"id":"baby","icon":"◦","name":"Having a Baby","desc":"Birth registration, parental leave and childcare","entryNodes":["gro-register-birth","nhs-healthy-start","nhs-free-prescriptions-pregnancy","hmrc-smp","dwp-maternity-allowance","hmrc-spp","dwp-sure-start-grant"]},{"id":"bereavement","icon":"—","name":"Death of Someone Close","desc":"Registration, probate and bereavement payments","entryNodes":["gro-register-death","dwp-bereavement-support","opg-lpa-activation"]},{"id":"marriage","icon":"∞","name":"Getting Married","desc":"Legal notice, certificates and name changes","entryNodes":["gro-give-notice","gro-marriage-cert"]},{"id":"retirement","icon":"◐","name":"Retiring","desc":"State Pension, Pension Credit and age entitlements","entryNodes":["hmrc-ni-check","dwp-state-pension","dwp-attendance-allowance","la-bus-pass","la-council-tax-reduction"]},{"id":"business","icon":"◈","name":"Starting a Business","desc":"Registration, tax obligations and compliance","entryNodes":["ch-register-ltd","hmrc-register-sole-trader","hmrc-vat","la-business-rates","la-food-hygiene","other-dbs"]},{"id":"buying-home","icon":"⌂","name":"Buying a Home","desc":"Stamp duty, land registration and first-time buyer schemes","entryNodes":["other-help-to-buy","hmrc-lisa","hmrc-sdlt"]},{"id":"moving","icon":"→","name":"Moving House","desc":"Address updates across all government systems","entryNodes":["la-electoral-roll","la-council-tax","dvla-update-address","hmrc-update-records","nhs-gp-register"]},{"id":"job-loss","icon":"⊘","name":"Losing Your Job","desc":"Benefits, tax refunds and NI record protection","entryNodes":["hmrc-p45","other-statutory-redundancy","dwp-new-style-esa"]},{"id":"disability","icon":"◎","name":"Disability or Health Condition","desc":"Benefits, adaptations and workplace support","entryNodes":["dwp-pip","dwp-attendance-allowance","dvla-notify-condition","la-disabled-facilities-grant","nhs-care-assessment"]},{"id":"carer","icon":"⊕","name":"Becoming a Carer","desc":"Allowances, NI credits and legal powers","entryNodes":["dwp-carers-allowance","la-carers-assessment","opg-lpa","other-carers-leave"]},{"id":"divorce","icon":"÷","name":"Separating or Divorcing","desc":"Legal proceedings, children and financial impacts","entryNodes":["hmcts-legal-aid","hmcts-divorce","dwp-child-maintenance","la-council-tax-single-discount"]},{"id":"school","icon":"◌","name":"Child Starting School","desc":"School places, meals, SEND and funding","entryNodes":["la-school-place","la-send-ehc","hmrc-free-childcare-30"]},{"id":"immigration","icon":"✦","name":"Arriving in the UK","desc":"Visas, BRP, NI number and NHS access","entryNodes":["ho-visa"]}];

    NODES_DATA.forEach(function(n) {
      n.data.color = DEPT_COLORS[n.data.deptKey] || '#9ca3af';
    });

    var ADJ = {};
    EDGES_DATA.forEach(function(e) {
      var s = e.data.source;
      if (!ADJ[s]) ADJ[s] = [];
      ADJ[s].push(e.data.target);
    });

    function getReachable(seeds) {
      var visited = {}, queue = seeds.slice();
      seeds.forEach(function(id) { visited[id] = true; });
      while (queue.length) {
        var cur = queue.shift();
        (ADJ[cur] || []).forEach(function(nxt) {
          if (!visited[nxt]) { visited[nxt] = true; queue.push(nxt); }
        });
      }
      return visited;
    }

    var deptCounts = {};
    NODES_DATA.forEach(function(n) {
      var dk = n.data.deptKey, dp = n.data.dept;
      if (!deptCounts[dk]) deptCounts[dk] = { name: dp, count: 0 };
      deptCounts[dk].count++;
    });
    var deptListEl = document.getElementById('dept-list');
    Object.keys(deptCounts).sort().forEach(function(dk) {
      var info = deptCounts[dk];
      var row = document.createElement('div');
      row.className = 'dept-row'; row.dataset.dept = dk;
      row.innerHTML = '<div class="dept-dot" style="background:' + (DEPT_COLORS[dk] || '#9ca3af') + '"></div>'
        + '<span>' + info.name + '</span>'
        + '<span class="dept-count">' + info.count + '</span>';
      row.addEventListener('click', function() { onDeptClick(dk, row); });
      deptListEl.appendChild(row);
    });

    var evListEl = document.getElementById('ev-list');
    EVENTS_DATA.forEach(function(evt) {
      var btn = document.createElement('button');
      btn.className = 'ev-btn'; btn.dataset.eid = evt.id;
      btn.innerHTML = '<span class="ev-icon">' + evt.icon + '</span>'
        + '<div><div class="ev-name">' + evt.name + '</div>'
        + '<div class="ev-desc">' + evt.desc + '</div></div>';
      btn.addEventListener('click', function() { onEvClick(evt.id, btn); });
      evListEl.appendChild(btn);
    });

    var cy = cytoscape({
      container: document.getElementById('cy'),
      elements: NODES_DATA.concat(EDGES_DATA),
      style: [
        { selector: 'node', style: {
            'background-color': 'data(color)',
            'label': 'data(label)',
            'font-size': 9, 'font-family': 'Menlo,Monaco,monospace',
            'color': '#fff', 'text-valign': 'center', 'text-halign': 'center',
            'width': 110, 'height': 38, 'shape': 'round-rectangle',
            'border-width': 1, 'border-color': 'rgba(255,255,255,0.12)',
            'text-wrap': 'wrap', 'text-max-width': 102,
        }},
        { selector: 'edge[type="REQUIRES"]', style: {
            'line-color': '#3b82f6', 'target-arrow-color': '#3b82f6',
            'target-arrow-shape': 'triangle', 'curve-style': 'bezier',
            'width': 2, 'line-style': 'solid', 'opacity': 0.75,
        }},
        { selector: 'edge[type="ENABLES"]', style: {
            'line-color': '#4b5563', 'target-arrow-color': '#4b5563',
            'target-arrow-shape': 'triangle', 'curve-style': 'bezier',
            'width': 1.5, 'line-style': 'dashed', 'opacity': 0.55,
        }},
        { selector: '.hl',  style: { 'opacity': 1 }},
        { selector: 'node.hl', style: { 'border-width': 2.5, 'border-color': '#fbbf24' }},
        { selector: 'edge.hl[type="REQUIRES"]', style: { 'line-color': '#60a5fa', 'target-arrow-color': '#60a5fa', 'opacity': 1 }},
        { selector: 'edge.hl[type="ENABLES"]',  style: { 'line-color': '#6b7280', 'target-arrow-color': '#6b7280', 'opacity': 0.85 }},
        { selector: '.dim', style: { 'opacity': 0.07 }},
        { selector: 'node.sel', style: { 'border-width': 3, 'border-color': '#fff' }},
        { selector: '.hidden', style: { 'display': 'none' }},
      ],
      layout: {
        name: 'cose', animate: false, fit: true, padding: 30,
        idealEdgeLength: 120, nodeRepulsion: 480000, edgeElasticity: 100,
        gravity: 80, numIter: 1000, nodeOverlap: 30, componentSpacing: 100,
      }
    });

    var activeEv = null, activeDept = null;

    function clearFilters() {
      activeEv = null; activeDept = null;
      document.querySelectorAll('.ev-btn').forEach(function(b) { b.classList.remove('active'); });
      document.querySelectorAll('.dept-row').forEach(function(r) { r.classList.remove('active'); });
      cy.elements().removeClass('hl dim');
    }

    function onEvClick(eid, btn) {
      if (activeEv === eid) { activeEv = null; btn.classList.remove('active'); cy.elements().removeClass('hl dim'); return; }
      activeEv = eid; activeDept = null;
      document.querySelectorAll('.ev-btn').forEach(function(b) { b.classList.remove('active'); });
      document.querySelectorAll('.dept-row').forEach(function(r) { r.classList.remove('active'); });
      btn.classList.add('active');
      var evt = EVENTS_DATA.find(function(e) { return e.id === eid; });
      var reach = getReachable(evt.entryNodes);
      cy.batch(function() {
        cy.elements().removeClass('hl dim');
        cy.nodes().forEach(function(n) { n.addClass(reach[n.id()] ? 'hl' : 'dim'); });
        cy.edges().forEach(function(e) { e.addClass((reach[e.data('source')] && reach[e.data('target')]) ? 'hl' : 'dim'); });
      });
    }

    function onDeptClick(dk, row) {
      if (activeDept === dk) { activeDept = null; row.classList.remove('active'); cy.elements().removeClass('hl dim'); return; }
      activeDept = dk; activeEv = null;
      document.querySelectorAll('.ev-btn').forEach(function(b) { b.classList.remove('active'); });
      document.querySelectorAll('.dept-row').forEach(function(r) { r.classList.remove('active'); });
      row.classList.add('active');
      cy.batch(function() {
        cy.elements().removeClass('hl dim');
        cy.nodes().forEach(function(n) { n.addClass(n.data('deptKey') === dk ? 'hl' : 'dim'); });
        cy.edges().forEach(function(e) {
          var sd = cy.getElementById(e.data('source')).data('deptKey');
          var td = cy.getElementById(e.data('target')).data('deptKey');
          e.addClass((sd === dk || td === dk) ? 'hl' : 'dim');
        });
      });
    }

    var matchInfo = document.getElementById('match-info');
    document.getElementById('search').addEventListener('input', function() {
      var q = this.value.trim().toLowerCase();
      if (!q) { clearFilters(); matchInfo.classList.remove('vis'); return; }
      activeEv = null; activeDept = null;
      document.querySelectorAll('.ev-btn').forEach(function(b) { b.classList.remove('active'); });
      document.querySelectorAll('.dept-row').forEach(function(r) { r.classList.remove('active'); });
      var hits = 0;
      cy.batch(function() {
        cy.elements().removeClass('hl dim');
        cy.nodes().forEach(function(n) {
          var match = n.data('fullName').toLowerCase().includes(q)
                   || n.id().toLowerCase().includes(q)
                   || n.data('dept').toLowerCase().includes(q);
          n.addClass(match ? 'hl' : 'dim');
          if (match) hits++;
        });
        cy.edges().addClass('dim');
      });
      matchInfo.textContent = hits + ' match' + (hits === 1 ? '' : 'es');
      matchInfo.classList.add('vis');
    });

    document.getElementById('tog-req').addEventListener('change', function() {
      cy.edges('[type="REQUIRES"]').toggleClass('hidden', !this.checked);
    });
    document.getElementById('tog-enb').addEventListener('change', function() {
      cy.edges('[type="ENABLES"]').toggleClass('hidden', !this.checked);
    });

    document.querySelectorAll('.lay-btn').forEach(function(btn) {
      btn.addEventListener('click', function() {
        document.querySelectorAll('.lay-btn').forEach(function(b) { b.classList.remove('active'); });
        btn.classList.add('active');
        var name = btn.dataset.layout;
        var opts = { name: name, animate: false, fit: true, padding: 30 };
        if (name === 'cose') {
          Object.assign(opts, { idealEdgeLength: 120, nodeRepulsion: 480000, edgeElasticity: 100, gravity: 80, numIter: 1000, nodeOverlap: 30 });
        } else if (name === 'dagre') {
          Object.assign(opts, { rankDir: 'TB', nodeSep: 55, rankSep: 75, edgeSep: 10 });
        } else if (name === 'breadthfirst') {
          Object.assign(opts, { directed: true, spacingFactor: 1.3 });
        }
        cy.layout(opts).run();
      });
    });

    document.getElementById('reset-btn').addEventListener('click', function() {
      document.getElementById('search').value = '';
      matchInfo.classList.remove('vis');
      clearFilters();
    });

    var detPanel = document.getElementById('detail');
    var detBody  = document.getElementById('det-body');
    document.getElementById('det-close').addEventListener('click', function() {
      detPanel.classList.remove('open');
      cy.nodes().removeClass('sel');
    });

    cy.on('tap', 'node', function(evt) {
      var node = evt.target;
      cy.nodes().removeClass('sel');
      node.addClass('sel');
      var d = node.data();

      var inEdges = [], outEdges = [];
      node.incomers('edge').forEach(function(e) {
        inEdges.push({ name: e.source().data('fullName'), id: e.source().id(), type: e.data('type') });
      });
      node.outgoers('edge').forEach(function(e) {
        outEdges.push({ name: e.target().data('fullName'), id: e.target().id(), type: e.data('type') });
      });

      var badges = '<span class="bdg bdg-dept">' + d.dept + '</span>'
        + '<span class="bdg bdg-type">' + d.serviceType + '</span>'
        + (d.deadline ? '<span class="bdg bdg-dl">&#x23F1; ' + d.deadline + '</span>' : '')
        + (d.proactive    ? '<span class="bdg bdg-pro">proactive</span>'    : '')
        + (d.gated        ? '<span class="bdg bdg-gat">gated</span>'        : '')
        + (d.universal    ? '<span class="bdg bdg-uni">universal</span>'    : '')
        + (d.means_tested ? '<span class="bdg bdg-mns">means-tested</span>' : '');

      var lifeEvts = EVENTS_DATA.filter(function(ev) {
        return ev.entryNodes.indexOf(d.id) !== -1;
      }).map(function(ev) { return ev.icon + ' ' + ev.name; }).join(', ');

      function nodeList(arr) {
        return arr.map(function(n) {
          return '<li>' + n.name + '<br><span class="det-nid">' + n.type + '  ' + n.id + '</span></li>';
        }).join('');
      }

      detBody.innerHTML =
        '<p class="det-name">' + d.fullName + '</p>'
        + '<div>' + badges + '</div>'
        + '<p class="det-desc">' + d.desc + '</p>'
        + '<p class="det-elig">' + d.eligibilitySummary + '</p>'
        + (lifeEvts ? '<p class="det-stitle">Entry point for</p><p style="font-size:.73rem">' + lifeEvts + '</p>' : '')
        + (inEdges.length  ? '<p class="det-stitle">Prerequisites (' + inEdges.length + ')</p><ul class="det-list">' + nodeList(inEdges) + '</ul>' : '')
        + (outEdges.length ? '<p class="det-stitle">Leads to (' + outEdges.length + ')</p><ul class="det-list">' + nodeList(outEdges) + '</ul>' : '')
        + '<a class="det-link" href="' + d.govuk_url + '" target="_blank" rel="noopener">&#x2197; ' + d.govuk_url + '</a>'
        + '<p class="det-id">' + d.id + '</p>';

      detPanel.classList.add('open');
    });

    cy.on('tap', function(evt) {
      if (evt.target === cy) { detPanel.classList.remove('open'); cy.nodes().removeClass('sel'); }
    });
  </script>
</body>
</html>